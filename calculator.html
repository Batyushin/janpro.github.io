<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —â–∏—Ç–∞ | JanPro.ru</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="site/styles.css">
    <link rel="icon" type="image/x-icon" href="site/favicon.ico" />
    <script src="site/metrics.js"></script>

    <style>
        /* --- 1. –ì–õ–ê–í–ù–ê–Ø –û–ë–ï–†–¢–ö–ê --- */
        .calc-card-wrapper {
            background: rgba(15, 10, 10, 0.6);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 30px;
            overflow: visible !important;
            display: flex;
            flex-direction: column;
            gap: 0;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(40px);
            position: relative;
        }

        .calc-card-wrapper:hover {
            transform: none !important;
            border-color: var(--border-color) !important;
        }

        /* --- 2. –ó–ê–ì–û–õ–û–í–û–ö --- */
        .calc-header {
            text-align: center;
            margin: -30px -30px 0 -30px;
            padding: 30px 30px 25px 30px;
            border-bottom: none;
            position: relative; z-index: 2;
            display: flex; flex-direction: column; align-items: center;
        }

        .calc-title-row {
            display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 8px;
        }
        .calc-title-icon { width: 40px; height: 40px; }
        .calc-title { margin: 0; font-size: 2rem; font-weight: 900; color: #fff; }
        .calc-subtitle { margin: 0; color: #aaa; font-size: 1rem; }

        /* --- 3. –°–ï–ö–¶–ò–ò --- */
        .calc-section {
            padding: 25px 0;
            display: flex;
            flex-direction: column; gap: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            position: relative; z-index: 2;
        }
        .calc-section:last-child { border-bottom: none; }

        .section-header { display: flex; align-items: center; gap: 15px; min-width: 260px; }

        .section-number {
            display: flex; align-items: center; justify-content: center;
            width: 32px; height: 32px;
            border: 2px solid var(--accent); border-radius: 50%;
            color: var(--accent); font-size: 1.1rem; font-weight: 900;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.2); flex-shrink: 0;
        }

        .section-title { font-size: 1.1rem; font-weight: 700; color: #fff; }

        .options-grid { display: grid; grid-template-columns: 1fr; gap: 12px; width: 100%; }

        @media (min-width: 900px) {
            .calc-section { flex-direction: row; align-items: flex-start; }
            .section-header { padding-top: 10px; }
            .options-grid { grid-template-columns: repeat(3, 1fr); }
        }

        /* --- 4. –ö–ù–û–ü–ö–ò –í–´–ë–û–†–ê --- */
        .option-label { cursor: pointer; position: relative; display: block; width: 100%; }
        .option-input { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }

        .option-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px; padding: 15px;
            display: flex; align-items: center; gap: 15px;
            transition: all 0.3s ease; height: 100%; min-height: 70px;
        }

        .option-label:hover .option-card {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .option-marker {
            width: 22px; height: 22px; border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.3);
            flex-shrink: 0; position: relative; transition: all 0.2s;
        }
        .option-marker::after {
            content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
            width: 12px; height: 12px; background: #fff; border-radius: 50%; transition: transform 0.2s;
        }
        .checkbox-mode .option-marker { border-radius: 4px; }
        .checkbox-mode .option-marker::after { border-radius: 2px; }

        /* ACTIVE */
        .option-input:checked + .option-card {
            background: rgba(40, 10, 10, 0.6);
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.15);
        }
        .option-input:checked + .option-card .option-marker {
            background: var(--accent); border-color: var(--accent);
        }
        .option-input:checked + .option-card .option-marker::after {
            transform: translate(-50%, -50%) scale(1);
        }

        .option-content { display: flex; flex-direction: column; }
        .option-text { color: #fff; font-weight: 700; font-size: 0.95rem; line-height: 1.2; }
        .option-sub { font-size: 0.8rem; color: #888; margin-top: 4px; }

        /* --- 5. –ò–¢–û–ì–û–í–ê–Ø –ü–õ–ê–®–ö–ê --- */
        .total-sticky {
            position: sticky; bottom: 20px;
            background: rgba(15, 10, 10, 0.6);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
            border-radius: 24px; padding: 20px 25px; margin-top: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.15);
            z-index: 100;
            display: flex; flex-direction: column; align-items: center; text-align: center;
            transition: opacity 0.3s;
        }

        .total-sticky:hover { transform: none !important; border-color: var(--border-color) !important; }
        .total-sticky.disabled { opacity: 0.6; filter: grayscale(0.8); }

        .total-label { color: rgba(255, 255, 255, 0.5); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 700; margin-bottom: 5px; }
        .total-price {
            font-size: 2.8rem; font-weight: 900; color: #fff; margin: 0 0 15px 0;
            text-shadow: 0 0 40px rgba(255, 255, 255, 0.1);
            line-height: 1; letter-spacing: -1px;
        }

        /* --- –°–û–¶–°–ï–¢–ò --- */
        .social-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 100%; max-width: 500px; }

        .calc-social-btn {
            display: flex; align-items: center; justify-content: center; gap: 12px;
            padding: 12px; border-radius: 16px;
            color: #fff; font-weight: 700; text-decoration: none; font-size: 0.95rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }

        /* –ö–û–ù–¢–ï–ô–ù–ï–† –ò–ö–û–ù–ö–ò (–ë–µ–∑ –æ–±–≤–æ–¥–∫–∏ –≤ –ø–æ–∫–æ–µ) */
        .social-circle {
            width: 32px; height: 32px;
            background: transparent;
            border: none;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.3s ease;
        }

        /* –ò–ö–û–ù–ö–ê */
        .calc-social-btn img {
            width: 30px; height: 30px;
            object-fit: contain;
            display: block;
            transition: transform 0.3s ease;
        }

        /* --- –•–û–í–ï–† –≠–§–§–ï–ö–¢–´ (–ö–†–ê–°–ù–´–ô –°–¢–ò–õ–¨) --- */
        .calc-social-btn:hover {
            transform: translateY(-3px);
            background: rgba(40, 10, 10, 0.6);
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
        }

        .calc-social-btn:hover .social-circle {
            background: var(--accent);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
            transform: scale(1.1);
        }

        .calc-social-btn.disabled { pointer-events: none; opacity: 0.3; }

        @media (max-width: 600px) {
            .total-sticky { bottom: 10px; padding: 15px; border-radius: 20px; }
            .total-price { font-size: 2.2rem; margin-bottom: 12px; }
            .total-label { font-size: 0.65rem; }
            .calc-social-btn { padding: 10px; font-size: 0.85rem; }
            .social-circle { width: 28px; height: 28px; }
            .calc-social-btn img { width: 26px; height: 26px; }
        }

    </style>
</head>
<body>

<div class="bg-depth"></div>
<div class="container">

    <div id="header-container"></div>
    <div id="menu-container"></div>

    <div class="card calc-card-wrapper">

        <div class="calc-header">
            <div class="calc-title-row">
                <svg class="calc-title-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="appleSilverGradCalc" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#FFFFFF" />
                            <stop offset="100%" style="stop-color:#C0C8D8" />
                        </linearGradient>
                    </defs>
                    <rect x="4" y="2" width="16" height="20" rx="4" fill="url(#appleSilverGradCalc)"/>
                    <rect x="7" y="6" width="10" height="3" rx="1.5" fill="#080808" opacity="0.3"/>
                    <circle cx="8.5" cy="13.5" r="1.5" fill="#080808" opacity="0.4"/>
                    <circle cx="12" cy="13.5" r="1.5" fill="#080808" opacity="0.4"/>
                    <circle cx="15.5" cy="13.5" r="1.5" fill="#080808" opacity="0.4"/>
                    <circle cx="8.5" cy="17" r="1.5" fill="#080808" opacity="0.4"/>
                    <circle cx="12" cy="17" r="1.5" fill="#080808" opacity="0.4"/>
                    <circle cx="15.5" cy="17" r="1.5" fill="#080808" opacity="0.4"/>
                </svg>
                <h2 class="calc-title">–û–Ω–ª–∞–π–Ω-–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
            </div>
            <p class="calc-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∏ —Ü–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</p>
        </div>

        <form id="calcForm" onchange="calculate()">

            <div class="calc-section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title">–í–≤–æ–¥ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞</div>
                </div>
                <div class="options-grid">
                    <label class="option-label">
                        <input type="radio" name="voltage" value="1phase" class="option-input" checked>
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">1 –§–∞–∑–∞ (230–í)</span>
                                <span class="option-sub">–°—Ç–∞–Ω–¥–∞—Ä—Ç</span>
                            </div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="voltage" value="3phase" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">3 –§–∞–∑—ã (400–í)</span>
                                <span class="option-sub">–î–æ–º / –ù–æ–≤–æ—Å—Ç—Ä–æ–π</span>
                            </div>
                        </div>
                    </label>
                </div>
            </div>

            <div class="calc-section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title">–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</div>
                </div>
                <div class="options-grid">
                    <label class="option-label">
                        <input type="radio" name="type" value="studio" class="option-input" checked>
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–°—Ç—É–¥–∏—è</span><span class="option-sub">–¥–æ 45 –º¬≤</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="type" value="apart" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ö–≤–∞—Ä—Ç–∏—Ä–∞</span><span class="option-sub">45-90 –º¬≤</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="type" value="large" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ë–æ–ª—å—à–∞—è –∫–≤.</span><span class="option-sub">90+ –º¬≤</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="type" value="house" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ß–∞—Å—Ç–Ω—ã–π –¥–æ–º</span><span class="option-sub">–ö–æ—Ç—Ç–µ–¥–∂</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="type" value="commercial" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ö–æ–º–º–µ—Ä—Ü–∏—è</span><span class="option-sub">–û—Ñ–∏—Å / –ö–∞—Ñ–µ</span></div>
                        </div>
                    </label>
                </div>
            </div>

            <div class="calc-section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title">–£–º–Ω—ã–π –¥–æ–º</div>
                </div>
                <div class="options-grid">
                    <label class="option-label">
                        <input type="radio" name="smart" value="none" class="option-input" checked>
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ë–µ–∑ —É–º–Ω–æ–≥–æ –¥–æ–º–∞</span><span class="option-sub">–ö–ª–∞—Å—Å–∏–∫–∞</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="smart" value="wirenboard" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">WirenBoard</span><span class="option-sub">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="smart" value="loxone" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">Loxone</span><span class="option-sub">Luxury (–ê–≤—Å—Ç—Ä–∏—è)</span></div>
                        </div>
                    </label>
                </div>
            </div>

            <div class="calc-section checkbox-mode">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏</div>
                </div>
                <div class="options-grid">
                    <label class="option-label">
                        <input type="checkbox" name="protection" value="master" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">–ú–∞—Å—Ç–µ—Ä-–∫–Ω–æ–ø–∫–∞</span>
                                <span class="option-sub">–í—ã–∫–ª. –≤—Å—ë</span>
                            </div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="checkbox" name="protection" value="cross" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">–ù–µ–æ—Ç–∫–ª. –ª–∏–Ω–∏–∏</span>
                                <span class="option-sub">–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫</span>
                            </div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="checkbox" name="protection" value="led" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">LED –ª–µ–Ω—Ç—ã</span>
                                <span class="option-sub">–ü–æ–¥—Å–≤–µ—Ç–∫–∞</span>
                            </div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="checkbox" name="protection" value="floor" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">–¢–µ–ø–ª—ã–π –ø–æ–ª</span>
                                <span class="option-sub">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</span>
                            </div>
                        </div>
                    </label>
                </div>
            </div>

        </form>
    </div>

    <div class="total-sticky card" id="totalBlock">
        <div class="total-label">–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥ –∫–ª—é—á</div>
        <div class="total-price" id="totalPrice">0 ‚ÇΩ</div>

        <div class="social-grid">
            <a href="#" id="waLink" target="_blank" class="calc-social-btn">
                <div class="social-circle">
                    <img src="site/img/whatsapp.png" alt="WhatsApp">
                </div>
                WhatsApp
            </a>
            <a href="#" id="tgLink" target="_blank" class="calc-social-btn">
                <div class="social-circle">
                    <img src="site/img/tg.svg" alt="Telegram">
                </div>
                Telegram
            </a>
        </div>

        <p style="font-size: 0.75rem; color: var(--text-muted); margin: 15px 0 0 0;">
            *–¶–µ–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–π. –í–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–±–æ—Ä–∫—É –∏ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ.
        </p>
    </div>

    <div id="services-container" style="display: flex; flex-direction: column; gap: 20px; margin-top: 40px;"></div>
    <div id="footer-container"></div>

</div>

<script src="site/loader.js"></script>
<script>
    window.calculate = function() {
        const form = document.getElementById('calcForm');
        const totalEl = document.getElementById('totalPrice');
        const totalBlock = document.getElementById('totalBlock');
        const buttons = document.querySelectorAll('.calc-social-btn');

        if (!form) return;

        // –¶–ï–ù–´
        const PRICES = {
            base: 15000,
            voltage: { '1phase': 0, '3phase': 12000 },
            type: {
                'studio': 25000, 'apart': 45000, 'large': 75000,
                'house': 110000, 'commercial': 80000
            },
            smart: {
                'none': 0, 'wirenboard': 180000, 'loxone': 350000
            },
            protection: {
                'master': 6000, 'cross': 4000, 'led': 25000, 'floor': 12000
            }
        };

        const formData = new FormData(form);

        const v = formData.get('voltage');
        const t = formData.get('type');
        const s = formData.get('smart');

        if (!v || !t || !s) {
            totalEl.textContent = '--- ‚ÇΩ';
            totalBlock.classList.add('disabled');
            buttons.forEach(btn => btn.classList.add('disabled'));
            return;
        }

        totalBlock.classList.remove('disabled');
        buttons.forEach(btn => btn.classList.remove('disabled'));

        let total = PRICES.base;

        total += PRICES.voltage[v] || 0;
        total += PRICES.type[t] || 0;
        total += PRICES.smart[s] || 0;

        formData.getAll('protection').forEach(val => {
            total += PRICES.protection[val] || 0;
        });

        if(totalEl) {
            totalEl.textContent = new Intl.NumberFormat('ru-RU').format(total) + ' ‚ÇΩ';
        }
        updateLinks(total, form);
    };

    function updateLinks(price, form) {
        const getTxt = (name) => {
            const el = form.querySelector(`input[name="${name}"]:checked`);
            if(!el) return '-';
            return el.closest('.option-label').querySelector('.option-text').innerText;
        };

        const getMulti = (name) => {
            const els = form.querySelectorAll(`input[name="${name}"]:checked`);
            if(els.length === 0) return '–ù–µ—Ç';
            return Array.from(els).map(el => el.closest('.option-label').querySelector('.option-text').innerText).join(', ');
        };

        let msg = `–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—á–µ—Ç —Å —Å–∞–π—Ç–∞ JanPro:\n`;
        msg += `‚ö° –í–≤–æ–¥: ${getTxt('voltage')}\n`;
        msg += `üè† –û–±—ä–µ–∫—Ç: ${getTxt('type')}\n`;
        msg += `üß† –£–º–Ω—ã–π –¥–æ–º: ${getTxt('smart')}\n`;
        msg += `‚öôÔ∏è –î–æ–ø. –æ–ø—Ü–∏–∏: ${getMulti('protection')}\n`;
        msg += `\nüí∞ –ü—Ä–∏–º–µ—Ä–Ω–æ: ${new Intl.NumberFormat('ru-RU').format(price)} ‚ÇΩ`;

        const encoded = encodeURIComponent(msg);
        const wa = document.getElementById('waLink');
        const tg = document.getElementById('tgLink');

        // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä
        if(wa) wa.href = `https://wa.me/79824699434?text=${encoded}`;
        if(tg) tg.href = `https://t.me/JanPro59?text=${encoded}`;
    }

    document.addEventListener("DOMContentLoaded", function() {
        try {
            if (typeof initPage === 'function') initPage('calculator');
            if (typeof initSpotlight === 'function') setTimeout(initSpotlight, 500);
        } catch(e) {}

        calculate();
    });
</script>

</body>
</html>