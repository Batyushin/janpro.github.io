<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —â–∏—Ç–∞ | JanPro.ru</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="site/styles.css">
    <link rel="icon" type="image/x-icon" href="site/favicon.ico" />
    <script src="site/metrics.js"></script>

    <style>
        /* --- –°–¢–ò–õ–ò –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê --- */

        .calc-wrapper {
            display: flex;
            flex-direction: column;
            gap: 20px; /* –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É —Å—Ç–µ–∫–ª—è—à–∫–∞–º–∏ */
            width: 100%;
        }

        /* –ó–ê–ì–û–õ–û–í–û–ö –°–¢–†–ê–ù–ò–¶–´ */
        .page-header {
            margin-bottom: 20px; padding: 20px;
            /* –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –º–æ–∂–Ω–æ —Ç–æ–∂–µ –≤ —Å—Ç–µ–∫–ª—è—à–∫—É, –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç–æ–º */
        }
        .page-title { margin: 0; font-size: 1.8rem; font-weight: 700; color: #fff; }
        .page-subtitle { margin: 5px 0 0 0; color: #888; }

        /* --- –°–¢–ò–õ–¨ –í–û–ü–†–û–°–ê (–û–¢–î–ï–õ–¨–ù–ê–Ø –°–¢–ï–ö–õ–Ø–®–ö–ê - –ö–ê–ö –ë–´–õ–û –†–ê–ù–¨–®–ï) --- */
        .calc-section {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-number {
            background: rgba(255, 0, 0, 0.15);
            color: #FF0000;
            width: 28px; height: 28px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.9rem;
            font-weight: 900;
        }

        /* –°–ï–¢–ö–ê –û–¢–í–ï–¢–û–í */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            width: 100%;
        }

        /* –ù–∞ –ü–ö - –≤ —Å—Ç—Ä–æ–∫—É */
        @media (min-width: 900px) {
            .calc-section {
                flex-direction: row;
                align-items: flex-start;
            }
            .section-title {
                min-width: 250px;
                padding-top: 12px; /* –†–æ–≤–Ω—è–µ–º —Ç–µ–∫—Å—Ç —Å –∫–Ω–æ–ø–∫–∞–º–∏ */
            }
            .options-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* --- –ö–ù–û–ü–ö–ò –í–´–ë–û–†–ê --- */
        .option-label {
            cursor: pointer; position: relative; display: block; width: 100%;
        }

        /* –ü–†–Ø–ß–ï–ú –°–¢–ê–ù–î–ê–†–¢–ù–´–ô –ò–ù–ü–£–¢ (–ß–¢–û–ë–´ –ù–ï –ë–´–õ–û –ó–ê–î–í–û–ï–ù–ò–Ø) */
        .option-input {
            position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
            overflow: hidden; clip: rect(0, 0, 0, 0); border: 0;
        }

        /* –ö–ê–†–¢–û–ß–ö–ê –í–ê–†–ò–ê–ù–¢–ê (–í–ù–£–¢–†–ò –°–ï–ö–¶–ò–ò) */
        .option-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 14px 16px;
            display: flex; align-items: center; gap: 12px;
            transition: all 0.3s ease;
            height: 100%; min-height: 64px;
        }

        .option-label:hover .option-card {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* –ú–ê–†–ö–ï–†–´ */
        .option-marker {
            width: 20px; height: 20px; border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.3);
            flex-shrink: 0; position: relative; transition: all 0.2s;
        }
        .option-marker::after {
            content: ''; position: absolute;
            top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
            width: 10px; height: 10px; background: #fff; border-radius: 50%;
            transition: transform 0.2s;
        }

        .checkbox-mode .option-marker { border-radius: 4px; }
        .checkbox-mode .option-marker::after { border-radius: 2px; }

        /* –ê–ö–¢–ò–í–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï */
        .option-input:checked + .option-card {
            background: rgba(255, 0, 0, 0.15);
            border-color: #FF0000;
        }
        .option-input:checked + .option-card .option-marker {
            background: #FF0000; border-color: #FF0000;
        }
        .option-input:checked + .option-card .option-marker::after {
            transform: translate(-50%, -50%) scale(1);
        }

        .option-content { display: flex; flex-direction: column; }
        .option-text { color: #fff; font-weight: 500; font-size: 0.95rem; line-height: 1.2; }
        .option-sub { font-size: 0.75rem; color: #888; margin-top: 4px; }


        /* --- –ò–¢–û–ì–û–í–ê–Ø –ü–õ–ê–®–ö–ê (–¢–û–¢ –°–ê–ú–´–ô –°–¢–ò–õ–¨, –ö–û–¢–û–†–´–ô –í–ê–ú –ü–û–ù–†–ê–í–ò–õ–°–Ø) --- */
        .total-sticky {
            position: sticky;
            bottom: 20px;

            /* –¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω–æ–µ —Å—Ç–µ–∫–ª–æ */
            background: rgba(30, 5, 5, 0.9);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);

            border: 1px solid rgba(255, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 0, 0, 0.6);

            border-radius: 24px;
            padding: 30px;
            margin-top: 30px;

            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            z-index: 100;
            display: flex; flex-direction: column; align-items: center; text-align: center;
        }

        .total-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px;
            font-weight: 700; margin-bottom: 5px;
        }

        .total-price {
            font-size: 3rem; font-weight: 900; color: #fff;
            margin: 0 0 25px 0;
            text-shadow: 0 0 35px rgba(255, 0, 0, 0.8); /* –ù–µ–æ–Ω */
            line-height: 1; letter-spacing: -1px;
        }

        .social-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; max-width: 500px;
        }

        /* –ö–ù–û–ü–ö–ò (–°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ) */
        .calc-social-btn {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            padding: 16px; border-radius: 16px;
            color: #fff; font-weight: 700; text-decoration: none; font-size: 1rem;

            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }
        .calc-social-btn svg { width: 24px; height: 24px; fill: #fff; transition: transform 0.3s; }

        .calc-social-btn:hover {
            transform: translateY(-3px);
            background: rgba(255, 0, 0, 0.2);
            border-color: #FF0000;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
        }
        .calc-social-btn:hover svg { transform: scale(1.1); }

    </style>
</head>
<body>

<div class="bg-depth"></div>
<div class="container">

    <div id="header-container"></div>
    <div id="menu-container"></div>

    <div class="card page-header">
        <h2 class="page-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏</h2>
        <p class="page-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∏ —Ü–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</p>
    </div>

    <form id="calcForm" class="calc-wrapper">

        <div class="calc-section">
            <div class="section-title"><span class="section-number">1.</span> –í–≤–æ–¥ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞</div>
            <div class="options-grid">
                <label class="option-label">
                    <input type="radio" name="voltage" value="1phase" class="option-input" checked>
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content">
                            <span class="option-text">1 –§–∞–∑–∞ (230–í)</span>
                            <span class="option-sub">–°—Ç–∞–Ω–¥–∞—Ä—Ç</span>
                        </div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="voltage" value="3phase" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content">
                            <span class="option-text">3 –§–∞–∑—ã (400–í)</span>
                            <span class="option-sub">–î–æ–º / –ù–æ–≤–æ—Å—Ç—Ä–æ–π</span>
                        </div>
                    </div>
                </label>
            </div>
        </div>

        <div class="calc-section">
            <div class="section-title"><span class="section-number">2.</span> –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</div>
            <div class="options-grid">
                <label class="option-label">
                    <input type="radio" name="type" value="studio" class="option-input" checked>
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content"><span class="option-text">–°—Ç—É–¥–∏—è</span><span class="option-sub">–¥–æ 45 –º¬≤</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="type" value="apart" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content"><span class="option-text">–ö–≤–∞—Ä—Ç–∏—Ä–∞</span><span class="option-sub">45-90 –º¬≤</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="type" value="large" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content"><span class="option-text">–ë–æ–ª—å—à–∞—è –∫–≤.</span><span class="option-sub">90+ –º¬≤</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="type" value="house" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content"><span class="option-text">–ß–∞—Å—Ç–Ω—ã–π –¥–æ–º</span><span class="option-sub">–ö–æ—Ç—Ç–µ–¥–∂</span></div>
                    </div>
                </label>
            </div>
        </div>

        <div class="calc-section checkbox-mode">
            <div class="section-title"><span class="section-number">3.</span> –§—É–Ω–∫—Ü–∏–∏ –∑–∞—â–∏—Ç—ã</div>
            <div class="options-grid">
                <label class="option-label">
                    <input type="checkbox" name="protection" value="relay" class="option-input" checked>
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content">
                            <span class="option-text">–†–µ–ª–µ –Ω–∞–ø—Ä.</span>
                            <span class="option-sub">–û—Ç —Å–∫–∞—á–∫–æ–≤</span>
                        </div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="checkbox" name="protection" value="master" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content">
                            <span class="option-text">–ú–∞—Å—Ç–µ—Ä-–∫–Ω–æ–ø–∫–∞</span>
                            <span class="option-sub">–í—ã–∫–ª. –≤—Å—ë</span>
                        </div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="checkbox" name="protection" value="cross" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content">
                            <span class="option-text">–ù–µ–æ—Ç–∫–ª. –ª–∏–Ω–∏–∏</span>
                            <span class="option-sub">–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫</span>
                        </div>
                    </div>
                </label>
            </div>
        </div>

        <div class="calc-section">
            <div class="section-title"><span class="section-number">4.</span> –£–º–Ω—ã–π –¥–æ–º</div>
            <div class="options-grid">
                <label class="option-label">
                    <input type="radio" name="smart" value="none" class="option-input" checked>
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content"><span class="option-text">–ö–ª–∞—Å—Å–∏–∫–∞</span><span class="option-sub">–û–±—ã—á–Ω—ã–π —â–∏—Ç</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="smart" value="light" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content"><span class="option-text">–°–≤–µ—Ç</span><span class="option-sub">–ò–º–ø—É–ª—å—Å–Ω—ã–µ —Ä–µ–ª–µ</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="smart" value="full" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div class="option-content"><span class="option-text">WirenBoard</span><span class="option-sub">–ü–æ–ª–Ω—ã–π —Ñ–∞—Ä—à</span></div>
                    </div>
                </label>
            </div>
        </div>

    </form>

    <div class="total-sticky">
        <div class="total-label">–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥ –∫–ª—é—á</div>
        <div class="total-price" id="totalPrice">0 ‚ÇΩ</div>

        <div class="social-grid">
            <a href="#" id="waLink" target="_blank" class="calc-social-btn">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                </svg>
                WhatsApp
            </a>
            <a href="#" id="tgLink" target="_blank" class="calc-social-btn">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/>
                </svg>
                Telegram
            </a>
        </div>

        <p style="font-size: 0.75rem; color: var(--text-muted); margin: 15px 0 0 0;">
            *–¶–µ–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–π.
        </p>
    </div>

    <div id="services-container" style="display: flex; flex-direction: column; gap: 20px; margin-top: 40px;"></div>

    <div id="footer-container"></div>

</div>

<script src="site/loader.js"></script>
<script>
    // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –õ–û–ì–ò–ö–ê ---
    // –í—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–¥ —Å—Ä–∞–∑—É, —Ç.–∫. —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ–Ω—Ü–µ body
    (function() {
        initPage('calculator');

        /* –¶–ï–ù–´ */
        const PRICES = {
            base: 15000,
            voltage: { '1phase': 0, '3phase': 12000 },
            type: { 'studio': 25000, 'apart': 45000, 'large': 75000, 'house': 110000 },
            protection: { 'relay': 8000, 'master': 6000, 'cross': 4000 },
            smart: { 'none': 0, 'light': 60000, 'full': 180000 }
        };

        const form = document.getElementById('calcForm');
        const totalEl = document.getElementById('totalPrice');

        // –§–£–ù–ö–¶–ò–Ø –†–ê–°–ß–ï–¢–ê
        function calculate() {
            if (!form) return;
            const formData = new FormData(form);
            let total = PRICES.base;

            // 1. Radio (–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π)
            const volt = formData.get('voltage');
            const type = formData.get('type');
            const smart = formData.get('smart');

            if(volt && PRICES.voltage[volt] !== undefined) total += PRICES.voltage[volt];
            if(type && PRICES.type[type] !== undefined) total += PRICES.type[type];
            if(smart && PRICES.smart[smart] !== undefined) total += PRICES.smart[smart];

            // 2. Checkboxes
            formData.getAll('protection').forEach(val => {
                if(PRICES.protection[val] !== undefined) total += PRICES.protection[val];
            });

            if(totalEl) {
                totalEl.textContent = new Intl.NumberFormat('ru-RU').format(total) + ' ‚ÇΩ';
            }
            updateLinks(total);
        }

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–°–´–õ–û–ö
        function updateLinks(price) {
            const getText = (name) => {
                const el = form.querySelector(`input[name="${name}"]:checked`);
                // –ò—â–µ–º —Ç–µ–∫—Å—Ç: –ø–æ–¥–Ω–∏–º–∞–µ–º—Å—è –∫ label, –ø–æ—Ç–æ–º –∏—â–µ–º .option-text
                if (!el) return '-';
                const label = el.closest('.option-label');
                return label ? label.querySelector('.option-text').innerText : '-';
            };

            const getMultiText = (name) => {
                const els = form.querySelectorAll(`input[name="${name}"]:checked`);
                if (els.length === 0) return '–ù–µ—Ç';
                return Array.from(els).map(el => {
                    const label = el.closest('.option-label');
                    return label ? label.querySelector('.option-text').innerText : '';
                }).join(', ');
            };

            let msg = `–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—á–µ—Ç —Å —Å–∞–π—Ç–∞ JanPro:\n`;
            msg += `‚ö° –í–≤–æ–¥: ${getText('voltage')}\n`;
            msg += `üè† –û–±—ä–µ–∫—Ç: ${getText('type')}\n`;
            msg += `üõ° –ó–∞—â–∏—Ç–∞: ${getMultiText('protection')}\n`;
            msg += `üß† –£–º–Ω—ã–π –¥–æ–º: ${getText('smart')}\n`;
            msg += `\nüí∞ –ü—Ä–∏–º–µ—Ä–Ω–æ: ${new Intl.NumberFormat('ru-RU').format(price)} ‚ÇΩ`;

            const encoded = encodeURIComponent(msg);
            const wa = document.getElementById('waLink');
            const tg = document.getElementById('tgLink');

            if(wa) wa.href = `https://wa.me/79026395501?text=${encoded}`;
            if(tg) tg.href = `https://t.me/JanPro59?text=${encoded}`;
        }

        if(form) {
            form.addEventListener('change', calculate);
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–∞—Å—á–µ—Ç —Å—Ä–∞–∑—É
            calculate();
        }
    })();
</script>

</body>
</html>