<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —â–∏—Ç–∞ | JanPro.ru</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="site/styles.css">
    <link rel="icon" type="image/x-icon" href="site/favicon.ico" />
    <script src="site/metrics.js"></script>

    <style>
        /* --- 1. –ì–õ–ê–í–ù–ê–Ø –û–ë–ï–†–¢–ö–ê (–° –ü–†–û–ñ–ï–ö–¢–û–†–û–ú) --- */
        .calc-card-wrapper {
            background: rgba(15, 10, 10, 0.6);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 30px;
            overflow: visible !important;
            display: flex;
            flex-direction: column;
            gap: 0;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(40px);
            position: relative;
        }

        .calc-card-wrapper:hover {
            transform: none !important;
            border-color: var(--border-color) !important;
        }

        .calc-header {
            text-align: center;
            /* –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —Å —É—á–µ—Ç–æ–º padding —Ä–æ–¥–∏—Ç–µ–ª—è */
            margin: -30px -30px 0 -30px;
            padding: 30px 30px 25px 30px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            position: relative; z-index: 2;
        }
        .calc-title { margin: 0; font-size: 2rem; font-weight: 900; color: #fff; }
        .calc-subtitle { margin: 10px 0 0 0; color: #aaa; font-size: 1rem; }

        /* --- 2. –ë–õ–û–ö–ò –í–û–ü–†–û–°–û–í --- */
        .calc-section {
            padding: 25px 0;
            display: flex; flex-direction: column; gap: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            position: relative; z-index: 2;
        }
        .calc-section:last-child { border-bottom: none; }

        .section-header { display: flex; align-items: center; gap: 15px; min-width: 260px; }

        .section-number {
            display: flex; align-items: center; justify-content: center;
            width: 32px; height: 32px;
            border: 2px solid var(--accent); border-radius: 50%;
            color: var(--accent); font-size: 1.1rem; font-weight: 900;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.2); flex-shrink: 0;
        }

        .section-title { font-size: 1.1rem; font-weight: 700; color: #fff; }

        .options-grid { display: grid; grid-template-columns: 1fr; gap: 12px; width: 100%; }

        @media (min-width: 900px) {
            .calc-section { flex-direction: row; align-items: flex-start; }
            .section-header { padding-top: 10px; }
            .options-grid { grid-template-columns: repeat(3, 1fr); }
        }

        /* --- 3. –ö–ù–û–ü–ö–ò --- */
        .option-label { cursor: pointer; position: relative; display: block; width: 100%; }
        .option-input { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }

        .option-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px; padding: 15px;
            display: flex; align-items: center; gap: 15px;
            transition: all 0.3s ease; height: 100%; min-height: 70px;
        }

        .option-label:hover .option-card {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .option-marker {
            width: 22px; height: 22px; border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.3);
            flex-shrink: 0; position: relative; transition: all 0.2s;
        }
        .option-marker::after {
            content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
            width: 12px; height: 12px; background: #fff; border-radius: 50%; transition: transform 0.2s;
        }
        .checkbox-mode .option-marker { border-radius: 4px; }
        .checkbox-mode .option-marker::after { border-radius: 2px; }

        /* ACTIVE */
        .option-input:checked + .option-card {
            background: rgba(40, 10, 10, 0.6);
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.15);
        }
        .option-input:checked + .option-card .option-marker {
            background: var(--accent); border-color: var(--accent);
        }
        .option-input:checked + .option-card .option-marker::after {
            transform: translate(-50%, -50%) scale(1);
        }

        .option-content { display: flex; flex-direction: column; }
        .option-text { color: #fff; font-weight: 700; font-size: 0.95rem; line-height: 1.2; }
        .option-sub { font-size: 0.8rem; color: #888; margin-top: 4px; }

        /* --- 4. –ò–¢–û–ì --- */
        .total-sticky {
            position: sticky; bottom: 20px;
            background: rgba(30, 5, 5, 0.95);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 0, 0, 0.3); border-top: 1px solid rgba(255, 0, 0, 0.6);
            border-radius: 24px; padding: 30px; margin-top: 30px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.9);
            z-index: 100;
            display: flex; flex-direction: column; align-items: center; text-align: center;
            transition: opacity 0.3s;
        }

        .total-label { color: rgba(255, 255, 255, 0.6); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; font-weight: 700; margin-bottom: 5px; }
        .total-price {
            font-size: 3.5rem; font-weight: 900; color: #fff; margin: 0 0 25px 0;
            text-shadow: 0 0 40px rgba(255, 0, 0, 0.8); line-height: 1; letter-spacing: -1px;
        }

        .social-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; max-width: 500px; }

        .calc-social-btn {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            padding: 16px; border-radius: 16px;
            color: #fff; font-weight: 700; text-decoration: none; font-size: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }
        .calc-social-btn svg { width: 24px; height: 24px; fill: #fff; transition: transform 0.3s; }

        .calc-social-btn:hover {
            transform: translateY(-3px);
            background: rgba(255, 0, 0, 0.2);
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
        }
        .calc-social-btn:hover svg { transform: scale(1.1); }

    </style>
</head>
<body>

<div class="bg-depth"></div>
<div class="container">

    <div id="header-container"></div>
    <div id="menu-container"></div>

    <div class="card calc-card-wrapper">

        <div class="calc-header">
            <h2 class="calc-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏</h2>
            <p class="calc-subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞</p>
        </div>

        <form id="calcForm" onchange="calculate()">

            <div class="calc-section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title">–í–≤–æ–¥ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞</div>
                </div>
                <div class="options-grid">
                    <label class="option-label">
                        <input type="radio" name="voltage" value="1phase" class="option-input" checked>
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">1 –§–∞–∑–∞ (230–í)</span>
                                <span class="option-sub">–°—Ç–∞–Ω–¥–∞—Ä—Ç</span>
                            </div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="voltage" value="3phase" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">3 –§–∞–∑—ã (400–í)</span>
                                <span class="option-sub">–î–æ–º / –ù–æ–≤–æ—Å—Ç—Ä–æ–π</span>
                            </div>
                        </div>
                    </label>
                </div>
            </div>

            <div class="calc-section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title">–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</div>
                </div>
                <div class="options-grid">
                    <label class="option-label">
                        <input type="radio" name="type" value="studio" class="option-input" checked>
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–°—Ç—É–¥–∏—è</span><span class="option-sub">–¥–æ 45 –º¬≤</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="type" value="apart" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ö–≤–∞—Ä—Ç–∏—Ä–∞</span><span class="option-sub">45-90 –º¬≤</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="type" value="large" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ë–æ–ª—å—à–∞—è –∫–≤.</span><span class="option-sub">90+ –º¬≤</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="type" value="house" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ß–∞—Å—Ç–Ω—ã–π –¥–æ–º</span><span class="option-sub">–ö–æ—Ç—Ç–µ–¥–∂</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="type" value="commercial" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ö–æ–º–º–µ—Ä—Ü–∏—è</span><span class="option-sub">–û—Ñ–∏—Å / –ö–∞—Ñ–µ</span></div>
                        </div>
                    </label>
                </div>
            </div>

            <div class="calc-section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title">–£–º–Ω—ã–π –¥–æ–º</div>
                </div>
                <div class="options-grid">
                    <label class="option-label">
                        <input type="radio" name="smart" value="none" class="option-input" checked>
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">–ë–µ–∑ —É–º–Ω–æ–≥–æ –¥–æ–º–∞</span><span class="option-sub">–ö–ª–∞—Å—Å–∏–∫–∞</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="smart" value="full" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">WirenBoard</span><span class="option-sub">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</span></div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="radio" name="smart" value="loxone" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content"><span class="option-text">Loxone</span><span class="option-sub">Luxury (–ê–≤—Å—Ç—Ä–∏—è)</span></div>
                        </div>
                    </label>
                </div>
            </div>

            <div class="calc-section checkbox-mode">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏</div>
                </div>
                <div class="options-grid">
                    <label class="option-label">
                        <input type="checkbox" name="protection" value="master" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">–ú–∞—Å—Ç–µ—Ä-–∫–Ω–æ–ø–∫–∞</span>
                                <span class="option-sub">–í—ã–∫–ª. –≤—Å—ë</span>
                            </div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="checkbox" name="protection" value="cross" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">–ù–µ–æ—Ç–∫–ª. –ª–∏–Ω–∏–∏</span>
                                <span class="option-sub">–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫</span>
                            </div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="checkbox" name="protection" value="led" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">LED –ª–µ–Ω—Ç—ã</span>
                                <span class="option-sub">–ü–æ–¥—Å–≤–µ—Ç–∫–∞</span>
                            </div>
                        </div>
                    </label>
                    <label class="option-label">
                        <input type="checkbox" name="protection" value="floor" class="option-input">
                        <div class="option-card">
                            <div class="option-marker"></div>
                            <div class="option-content">
                                <span class="option-text">–¢–µ–ø–ª—ã–π –ø–æ–ª</span>
                                <span class="option-sub">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</span>
                            </div>
                        </div>
                    </label>
                </div>
            </div>

        </form>
    </div>

    <div class="total-sticky" id="totalBlock">
        <div class="total-label">–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥ –∫–ª—é—á</div>
        <div class="total-price" id="totalPrice">0 ‚ÇΩ</div>

        <div class="social-grid">
            <a href="#" id="waLink" target="_blank" class="calc-social-btn">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                </svg>
                WhatsApp
            </a>
            <a href="#" id="tgLink" target="_blank" class="calc-social-btn">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/>
                </svg>
                Telegram
            </a>
        </div>

        <p style="font-size: 0.75rem; color: var(--text-muted); margin: 15px 0 0 0;">
            *–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ (–¶–µ–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–π)
        </p>
    </div>


<div id="services-container" style="display: flex; flex-direction: column; gap: 20px; margin-top: 40px;"></div>
<div id="footer-container"></div>

</div>

<script src="site/loader.js"></script>
<script>
    // –û–±—ä—è–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≥–ª–æ–±–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ onchange
    window.calculate = function() {
        const form = document.getElementById('calcForm');
        const totalEl = document.getElementById('totalPrice');

        // –¶–ï–ù–´
        const PRICES = {
            base: 15000,
            voltage: { '1phase': 0, '3phase': 12000 },
            type: {
                'studio': 25000, 'apart': 45000, 'large': 75000,
                'house': 110000, 'commercial': 80000
            },
            protection: { // –î–æ–ø. –æ–ø—Ü–∏–∏
                'master': 6000, 'cross': 4000, 'led': 25000, 'floor': 12000
            },
            smart: {
                'none': 0, 'full': 180000, 'loxone': 350000
            }
        };

        if (!form) return;

        const formData = new FormData(form);
        let total = PRICES.base;

        // –†–∞–¥–∏–æ (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
        const v = formData.get('voltage');
        const t = formData.get('type');
        const s = formData.get('smart');

        if(v && PRICES.voltage[v]) total += PRICES.voltage[v];
        if(t && PRICES.type[t]) total += PRICES.type[t];
        if(s && PRICES.smart[s]) total += PRICES.smart[s];

        // –ß–µ–∫–±–æ–∫—Å—ã
        formData.getAll('protection').forEach(val => {
            if(PRICES.protection[val]) total += PRICES.protection[val];
        });

        if(totalEl) {
            totalEl.textContent = new Intl.NumberFormat('ru-RU').format(total) + ' ‚ÇΩ';
        }
        updateLinks(total, form);
    };

    function updateLinks(price, form) {
        const getTxt = (name) => {
            const el = form.querySelector(`input[name="${name}"]:checked`);
            if(!el) return '-';
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∏—â–µ–º —Ç–µ–∫—Å—Ç
            return el.closest('.option-label').querySelector('.option-text').innerText;
        };

        const getMulti = (name) => {
            const els = form.querySelectorAll(`input[name="${name}"]:checked`);
            if(els.length === 0) return '–ù–µ—Ç';
            return Array.from(els).map(el => el.closest('.option-label').querySelector('.option-text').innerText).join(', ');
        };

        let msg = `–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—á–µ—Ç —Å —Å–∞–π—Ç–∞ JanPro:\n`;
        msg += `‚ö° –í–≤–æ–¥: ${getTxt('voltage')}\n`;
        msg += `üè† –û–±—ä–µ–∫—Ç: ${getTxt('type')}\n`;
        msg += `üß† –£–º–Ω—ã–π –¥–æ–º: ${getTxt('smart')}\n`;
        msg += `‚öôÔ∏è –î–æ–ø. –æ–ø—Ü–∏–∏: ${getMulti('protection')}\n`;
        msg += `\nüí∞ –ü—Ä–∏–º–µ—Ä–Ω–æ: ${new Intl.NumberFormat('ru-RU').format(price)} ‚ÇΩ`;

        const encoded = encodeURIComponent(msg);
        const wa = document.getElementById('waLink');
        const tg = document.getElementById('tgLink');

        if(wa) wa.href = `https://wa.me/79026395501?text=${encoded}`;
        if(tg) tg.href = `https://t.me/JanPro59?text=${encoded}`;
    }

    document.addEventListener("DOMContentLoaded", function() {
        try {
            if (typeof initPage === 'function') initPage('calculator');
            if (typeof initSpotlight === 'function') setTimeout(initSpotlight, 500);
        } catch(e) {}

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        calculate();
    });
</script>

</body>
</html>