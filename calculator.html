<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —â–∏—Ç–∞ | JanPro.ru</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="site/styles.css">
    <link rel="icon" type="image/x-icon" href="site/favicon.ico" />
    <script src="site/metrics.js"></script>

    <style>
        /* –û–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .calc-wrapper {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* –ë–ª–æ–∫ —Å –≤–æ–ø—Ä–æ—Å–æ–º */
        .calc-section {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 25px;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-number {
            background: rgba(255,0,0,0.2);
            color: #FF0000;
            width: 28px; height: 28px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.9rem;
        }

        /* –°–µ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        @media (min-width: 600px) {
            .options-grid { grid-template-columns: repeat(2, 1fr); }
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –æ—Ç–≤–µ—Ç–∞ */
        .option-label {
            cursor: pointer;
            position: relative;
        }

        .option-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.2s ease;
        }

        .option-label:hover .option-card {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* –°–∫—Ä—ã—Ç—ã–π –∏–Ω–ø—É—Ç */
        .option-input { display: none; }

        /* –ú–∞—Ä–∫–µ—Ä (–∫—Ä—É–∂–æ–∫/–∫–≤–∞–¥—Ä–∞—Ç) */
        .option-marker {
            width: 20px; height: 20px;
            border-radius: 50%; /* –ö—Ä—É–≥ –¥–ª—è —Ä–∞–¥–∏–æ */
            border: 2px solid rgba(255,255,255,0.3);
            position: relative;
            flex-shrink: 0;
            transition: all 0.2s;
        }
        /* –ö–≤–∞–¥—Ä–∞—Ç –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞ */
        .checkbox-mode .option-marker { border-radius: 4px; }

        /* –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */
        .option-input:checked + .option-card {
            background: rgba(255, 0, 0, 0.1);
            border-color: #FF0000;
        }
        .option-input:checked + .option-card .option-marker {
            background: #FF0000;
            border-color: #FF0000;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.4);
        }

        .option-text { color: #fff; font-weight: 500; font-size: 0.95rem; }
        .option-sub { display: block; font-size: 0.75rem; color: #888; margin-top: 2px; }

        /* –ò–¢–û–ì–û–í–´–ô –ë–õ–û–ö (–õ–ò–ü–ö–ò–ô) */
        .total-sticky {
            position: sticky;
            bottom: 20px;
            background: rgba(18, 18, 18, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .total-label { color: #888; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; }
        .total-price {
            font-size: 2.2rem;
            font-weight: 900;
            color: #fff;
            margin: 5px 0 15px 0;
            text-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
        }

        .social-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            width: 100%;
        }

        .social-btn {
            display: flex; align-items: center; justify-content: center;
            padding: 12px; border-radius: 10px;
            color: #fff; font-weight: 700; text-decoration: none;
            font-size: 0.9rem; transition: transform 0.2s;
        }
        .social-btn:hover { transform: scale(1.02); }
        .bg-wa { background: #25D366; }
        .bg-tg { background: #229ED9; }

    </style>
</head>
<body>

<div class="bg-depth"></div>
<div class="container">

    <div id="header-container"></div>
    <div id="menu-container"></div>

    <div class="card" style="margin-bottom: 20px; padding: 20px;">
        <h2 style="margin: 0; font-size: 1.5rem;">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏</h2>
        <p style="margin: 5px 0 0 0; color: #888;">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∏ —Ü–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</p>
    </div>

    <form id="calcForm" class="calc-wrapper">

        <div class="calc-section">
            <div class="section-title"><span class="section-number">1</span> –í–≤–æ–¥ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞</div>
            <div class="options-grid">
                <label class="option-label">
                    <input type="radio" name="voltage" value="1phase" class="option-input" checked>
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div>
                            <span class="option-text">1 –§–∞–∑–∞ (230–í)</span>
                            <span class="option-sub">–°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –∫–≤–∞—Ä—Ç–∏—Ä</span>
                        </div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="voltage" value="3phase" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div>
                            <span class="option-text">3 –§–∞–∑—ã (400–í)</span>
                            <span class="option-sub">–ß–∞—Å—Ç–Ω—ã–µ –¥–æ–º–∞, –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏</span>
                        </div>
                    </div>
                </label>
            </div>
        </div>

        <div class="calc-section">
            <div class="section-title"><span class="section-number">2</span> –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</div>
            <div class="options-grid">
                <label class="option-label">
                    <input type="radio" name="type" value="studio" class="option-input" checked>
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div><span class="option-text">–°—Ç—É–¥–∏—è / 1-–∫–æ–º–Ω.</span><span class="option-sub">–¥–æ 45 –º¬≤</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="type" value="apart" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div><span class="option-text">–ö–≤–∞—Ä—Ç–∏—Ä–∞</span><span class="option-sub">45 - 90 –º¬≤</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="type" value="large" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div><span class="option-text">–ë–æ–ª—å—à–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞</span><span class="option-sub">90+ –º¬≤</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="type" value="house" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div><span class="option-text">–ß–∞—Å—Ç–Ω—ã–π –¥–æ–º</span><span class="option-sub">–ö–æ—Ç—Ç–µ–¥–∂</span></div>
                    </div>
                </label>
            </div>
        </div>

        <div class="calc-section checkbox-mode">
            <div class="section-title"><span class="section-number">3</span> –§—É–Ω–∫—Ü–∏–∏ –∑–∞—â–∏—Ç—ã</div>
            <div class="options-grid">
                <label class="option-label">
                    <input type="checkbox" name="protection" value="relay" class="option-input" checked>
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div>
                            <span class="option-text">–†–µ–ª–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</span>
                            <span class="option-sub">–°–ø–∞—Å–∞–µ—Ç —Ç–µ—Ö–Ω–∏–∫—É –æ—Ç —Å–∫–∞—á–∫–æ–≤</span>
                        </div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="checkbox" name="protection" value="master" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div>
                            <span class="option-text">–ú–∞—Å—Ç–µ—Ä-–≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å</span>
                            <span class="option-sub">–í–µ—Å—å —Å–≤–µ—Ç –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π</span>
                        </div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="checkbox" name="protection" value="cross" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div>
                            <span class="option-text">–ù–µ–æ—Ç–∫–ª—é—á–∞–µ–º—ã–µ –ª–∏–Ω–∏–∏</span>
                            <span class="option-sub">–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫, –†–æ—É—Ç–µ—Ä</span>
                        </div>
                    </div>
                </label>
            </div>
        </div>

        <div class="calc-section">
            <div class="section-title"><span class="section-number">4</span> –ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞ (–£–º–Ω—ã–π –¥–æ–º)</div>
            <div class="options-grid">
                <label class="option-label">
                    <input type="radio" name="smart" value="none" class="option-input" checked>
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div><span class="option-text">–ö–ª–∞—Å—Å–∏–∫–∞</span><span class="option-sub">–ë–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∏</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="smart" value="light" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div><span class="option-text">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º</span><span class="option-sub">–ò–º–ø—É–ª—å—Å–Ω—ã–µ —Ä–µ–ª–µ</span></div>
                    </div>
                </label>
                <label class="option-label">
                    <input type="radio" name="smart" value="full" class="option-input">
                    <div class="option-card">
                        <div class="option-marker"></div>
                        <div><span class="option-text">WirenBoard (Full)</span><span class="option-sub">–ü–æ–ª–Ω—ã–π "—Ñ–∞—Ä—à"</span></div>
                    </div>
                </label>
            </div>
        </div>

    </form>

    <div class="total-sticky">
        <div class="total-label">–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥ –∫–ª—é—á</div>
        <div class="total-price" id="totalPrice">0 ‚ÇΩ</div>

        <div class="social-grid">
            <a href="#" id="waLink" target="_blank" class="social-btn bg-wa">WhatsApp</a>
            <a href="#" id="tgLink" target="_blank" class="social-btn bg-tg">Telegram</a>
        </div>
        <p style="font-size: 0.75rem; color: #666; margin: 10px 0 0 0;">
            *–¶–µ–Ω–∞ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è. –í–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–±–æ—Ä–∫—É –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.
        </p>
    </div>

    <div id="services-container" style="display: flex; flex-direction: column; gap: 20px; margin-top: 40px;"></div>
    <div id="footer-container"></div>

</div>

<script src="site/loader.js"></script>
<script>
    initPage('calculator');

    /* --- –¶–ï–ù–´ –ò –õ–û–ì–ò–ö–ê --- */
    const PRICES = {
        base: 15000,
        voltage: { '1phase': 0, '3phase': 12000 },
        type: { 'studio': 25000, 'apart': 45000, 'large': 75000, 'house': 110000 },
        protection: { 'relay': 8000, 'master': 6000, 'cross': 4000 },
        smart: { 'none': 0, 'light': 60000, 'full': 180000 }
    };

    const form = document.getElementById('calcForm');
    const totalEl = document.getElementById('totalPrice');

    // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏)
    function calculate() {
        const formData = new FormData(form);
        let total = PRICES.base;

        total += PRICES.voltage[formData.get('voltage')] || 0;
        total += PRICES.type[formData.get('type')] || 0;

        formData.getAll('protection').forEach(val => {
            total += PRICES.protection[val] || 0;
        });

        total += PRICES.smart[formData.get('smart')] || 0;

        // –ê–Ω–∏–º–∞—Ü–∏—è —á–∏—Å–µ–ª (–ø—Ä–æ—Å—Ç–∞—è)
        totalEl.textContent = new Intl.NumberFormat('ru-RU').format(total) + ' ‚ÇΩ';

        updateLinks(total);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫
    function updateLinks(price) {
        const formData = new FormData(form);

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
        const getText = (name) => {
            const el = form.querySelector(`input[name="${name}"]:checked`);
            return el ? el.parentElement.querySelector('.option-text').innerText : '-';
        };

        const getMultiText = (name) => {
            const els = form.querySelectorAll(`input[name="${name}"]:checked`);
            if (els.length === 0) return '–ù–µ—Ç';
            return Array.from(els).map(el => el.parentElement.querySelector('.option-text').innerText).join(', ');
        };

        let msg = `–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—á–µ—Ç —Å —Å–∞–π—Ç–∞ JanPro:\n`;
        msg += `‚ö° –í–≤–æ–¥: ${getText('voltage')}\n`;
        msg += `üè† –û–±—ä–µ–∫—Ç: ${getText('type')}\n`;
        msg += `üõ° –ó–∞—â–∏—Ç–∞: ${getMultiText('protection')}\n`;
        msg += `üß† –£–º–Ω—ã–π –¥–æ–º: ${getText('smart')}\n`;
        msg += `\nüí∞ –ü—Ä–∏–º–µ—Ä–Ω–æ: ${new Intl.NumberFormat('ru-RU').format(price)} ‚ÇΩ`;

        const encoded = encodeURIComponent(msg);
        document.getElementById('waLink').href = `https://wa.me/79026395501?text=${encoded}`;
        document.getElementById('tgLink').href = `https://t.me/JanPro59?text=${encoded}`;
    }

    // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ –≤—Å–µ–π —Ñ–æ—Ä–º–µ
    form.addEventListener('change', calculate);

    // –ü–µ—Ä–≤–∏—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    calculate();

</script>

</body>
</html>